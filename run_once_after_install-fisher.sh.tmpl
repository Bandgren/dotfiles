#!/bin/bash

set -e

echo "ğŸŸ Setting up Fisher and Fish plugins..."

# Check if fish is installed
if ! command -v fish &> /dev/null; then
    echo "âš ï¸  Fish shell not found. Skipping Fisher installation."
    exit 0
fi

# Install Fisher if not already installed
if ! fish -c "type -q fisher" &> /dev/null; then
    echo "ğŸ“¦ Installing Fisher..."
    fish -c "curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher install jorgebucaran/fisher"
else
    echo "âœ… Fisher is already installed"
fi

# Update Fisher and install plugins from fish_plugins file
if [ -f "$HOME/.config/fish/fish_plugins" ]; then
    echo "ğŸ“¦ Installing Fish plugins..."
    fish -c "fisher update"
    echo "âœ… Fish plugins installed successfully!"
else
    echo "âš ï¸  Warning: fish_plugins file not found"
fi

echo "ğŸ‰ Fish setup complete!"
